[gcode_macro PRINT_START]
gcode:
  {% set BED_TEMP = params.BED_TEMP|default(80)|float %}
  {% set EXTRUDER_TEMP = params.EXTRUDER_TEMP|default(220)|float %}
    G28  ;Home all Axes
    M82; set extruder to Absolute positioning
    SET_GCODE_OFFSET Z=0.0; Set gcode offset to 0
    BED_MESH_CALIBRATE PROFILE=automatic METHOD=automatic probe_count=5,5 mesh_min=25,25 mesh_max=195,195 ADAPTIVE=1 ADAPTIVE_MARGIN=5 ; Auto-generate mesh around print area
    M140 S{BED_TEMP}; Start bed heating
    M109 S{EXTRUDER_TEMP}; Set and wait for nozzle to reach temperature
    M190 S{BED_TEMP}; Wait for bed to reach temperature
    _PURGE_LINE

[gcode_macro _PURGE_LINE]
gcode:
  {% if printer["gcode_macro status_cleaning"] != null %}
    status_cleaning
  {% endif %}
  SAVE_GCODE_STATE NAME=Pre_Prime 		
	G1 Z1.0 F3000; move z up little to prevent scratching the bed			
	G1 X50.0 Y0.2 Z0.3 F5000.0; move to start-line position	
	G1 X150.0 Y0.2 Z0.3 F1500.0 E10; draw 1st line
	G1 X150.0 Y0.6 Z0.3 F5000.0; move to side a little	
	G1 X50.0 Y0.6 Z0.3 F1500.0 E20; draw 2nd line
	G1 Z1.0 F3000; move z up little to prevent scratching the bed
    G28  ;Home all Axes
    M82; set extruder to Absolute positioning
	RESTORE_GCODE_STATE NAME=Pre_Prime

  {% if printer["gcode_macro status_printing"] != null %}
    status_printing
  {% endif %}
 M82; set extruder to Absolute positioning